image:
  repository: traefik/whoami  # container image repository
  tag: latest                 # container image tag
  pullPolicy: Always    # image pull policy

service:
  type: LoadBalancer          # service type
  port: 8080                  # service port
  annotations:
    metallb.universe.tf/loadBalancerIPs: "10.70.50.231"  # static IP for MetalLB

env:
  INSTANCE_NAME: "whoami"  # environment variable for tenant identification

configmaps:
  HTTP_PROXY: "http://192.168.60.1:3128"
  HTTPS_PROXY: "http://192.168.60.1:3128"
  NO_PROXY: "127.0.0.1,localhost,10.0.0.0/8,10.42.0.0/16,10.39.50.0/24,192.168.0.0/16,172.16.0.0/12,*.localhosting.svc,.svc.cluster.local"

sealed:
  PASSWORD: "AgEncryptedPassword=="  # sealed secret for password
  API_KEY: "AgEncryptedApiKey=="     # sealed secret for API key

persistence:
  enabled: true                # enable persistent storage
  size: 2Gi                    # PVC size
  accessModes:
    - ReadWriteMany            # PVC access mode
  pvName: "whoami-pv" # PV name
  subPath: "whoami"   # optional subpath in PV
  nfs:
    server: "<nfs-ip>"         # NFS server IP
    path: "/srv/exports"       # NFS export path

replicaCount: 1                # default number of replicas (pinned 1:1)

autoscaling:
  enabled: false                # enable HPA if true
  minReplicas: 1                # min replicas if autoscaling enabled
  maxReplicas: 1                # max replicas if autoscaling enabled
  targetCPUUtilizationPercentage: 70  # CPU utilization target for HPA

podSecurityContext:
  enabled: true                 # enable pod-level security context
  runAsNonRoot: true            # enforce non-root user
  runAsUser: 1000               # UID for pod
  fsGroup: 1000                 # group ownership for mounted volumes

containerSecurity:
  enabled: false                # enable container-level security context
  readOnlyRootFilesystem: true  # enforce read-only root filesystem
  allowPrivilegeEscalation: false # disallow privilege escalation
  capabilities:
    drop:
      - ALL                    # drop all Linux capabilities

seccompProfile:
  enabled: true                 # enable seccomp profile
  type: RuntimeDefault          # modern seccomp type

resources:
  requests:
    cpu: "100m"                 # requested CPU (used for HPA calculation)
    memory: "128Mi"             # requested memory
  limits:
    cpu: "500m"                 # max CPU
    memory: "256Mi"             # max memory